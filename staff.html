<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <title>Staff – GDC World</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- ✅ 상대경로로 수정 -->
  <link rel="icon" href="./favicon.png?v=3" type="image/png">

  <style>
    :root{ --gold:#e3c08b; --gold-2:#c4976b; --card:#3a3b41; }
    body{
      margin:0; min-height:100vh; display:grid; place-items:center;
      background: linear-gradient(135deg, var(--gold), var(--gold-2) 60%, #8a674f);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      color:#fff;
    }
    .card{
      width:min(960px, 92vw);
      background:var(--card);
      border-radius:16px; padding:24px;
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    header{ display:flex; align-items:center; justify-content:space-between; gap:12px; }
    header .brand{ display:flex; align-items:center; gap:12px; }
    header img{ width:40px; height:40px; }
    header h1{ font-size:20px; margin:0; }
    .actions{ display:flex; gap:8px; align-items:center; }
    .btn{
      appearance:none; border:0; padding:10px 14px; border-radius:10px; cursor:pointer;
      background:linear-gradient(135deg, var(--gold), var(--gold-2));
      color:#231a12; font-weight:700; box-shadow:0 0 12px rgba(227,192,139,.45);
    }
    main{ margin-top:18px; display:grid; gap:16px; }
    .panel{ background:#2f3035; border-radius:12px; padding:16px; }
    .muted{ opacity:.8; font-size:14px; }
  </style>

  <!-- ✅ auth.js 경로 & defer -->
  <script src="assets/auth.js?v=1" defer></script>

  <script>
  document.addEventListener('DOMContentLoaded', function(){
    if (!window.Auth) { alert('auth.js 로드 실패'); return; }

    // 직원 전용 접근(여러 역할 허용)
    Auth.requireRole([
      'staff','member','physio','ptadmin','nurse','frontdesk','radiology','vice'
    ]);

    // 로그인된 사용자 이메일 표시
    const emailEl = document.getElementById('whoami');
    if (emailEl) emailEl.textContent = Auth.currentUserEmail() || '';

    // 로그아웃 버튼
    const btn = document.getElementById('logoutBtn');
    if (btn) {
      btn.addEventListener('click', function(){
        Auth.logout();
        location.replace('login.html');  // ← 여기만 login.html로!
      });
    }
  });
</script>
</head>
<body>
  <div class="card">
    <header>
      <div class="brand">
        <!-- ✅ 로고도 상대경로 -->
        <img src="./gdc_logo.svg?v=1" alt="logo" onerror="this.style.display='none'">
        <h1>GDC World · 직원 작업 화면</h1>
      </div>
      <div class="actions">
        <span class="muted" id="whoami"></span>
        <!-- ✅ type="button" 추가 -->
        <button class="btn" id="logoutBtn" type="button">로그아웃</button>
      </div>
    </header>

    <main>
      <section class="panel">
        <h2 style="margin:0 0 8px 0;">할 일</h2>
        <ul style="margin:0; padding-left:18px; line-height:1.7;">
          <li>주사/수기치료 대기 순서 확인</li>
          <li>환자 인계 메모 확인</li>
          <li>원무과 문의 대응</li>
        </ul>
      </section>
    </main>
  </div>
</body>
</html>
